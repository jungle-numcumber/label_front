{"version":3,"file":"static/js/891.8ffe76cc.chunk.js","mappings":"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","sources":["components/PersonalReading/sideComponents/TextEditor/TextEditor.tsx","components/PersonalReading/sideComponents/PageRendered/PageRendered.js","webpack://label_front/./src/components/PersonalReading/sideComponents/HighlightList/HighlightList.module.css?0f21","webpack://label_front/./src/components/PersonalReading/sideComponents/SearchBar/SearchBar.module.css?f79b","components/PersonalReading/sideComponents/SearchBar/SearchBar.js","components/PersonalReading/sideComponents/HighlightList/HighlightBadge/HighlightBadge.js","components/PersonalReading/sideComponents/HighlightList/HighlightList.js","webpack://label_front/./src/components/PersonalReading/sideComponents/SideBar/SideBar.module.css?ec18","components/PersonalReading/sideComponents/ShowAndHideSwitch/ShowAndHideSwitch.js","components/PersonalReading/sideComponents/SideBar/SideBar.js","components/PersonalReading/sideFunction/sideFunction.js","components/PersonalReading/PersonalReading.js"],"sourcesContent":["import { editorViewOptionsCtx } from '@milkdown/core';\nimport { defaultValueCtx, Editor, rootCtx, JSONRecord } from '@milkdown/core';\nimport { listener, listenerCtx } from '@milkdown/plugin-listener';\nimport { prism } from '@milkdown/plugin-prism';\nimport { tooltip } from '@milkdown/plugin-tooltip';\nimport { ReactEditor, useEditor, useNodeCtx } from '@milkdown/react';\nimport { nord } from '@milkdown/theme-nord';\nimport { FC, ReactNode, useEffect } from 'react';\nimport { block, blockPlugin } from '@milkdown/plugin-block';\nimport { math } from '@milkdown/plugin-math';\nimport { menu, menuPlugin } from '@milkdown/plugin-menu';\nimport { gfm } from '@milkdown/preset-gfm';\nimport { history } from '@milkdown/plugin-history'\nimport io from 'socket.io-client';\nimport React from 'react';\nimport './TextEditor.css';\nimport axios from \"axios\";\n\nconst url:string = 'https://tradingstudy.shop:443';\nlet socket:any;\n\nlet timerId:NodeJS.Timeout\nexport class WrapperTextEditor extends React.Component<{markdownValue: JSONRecord, commitIdx: number, userIdx: string, pdfIdx: string}, { fp: any, flag: boolean }> {\n    constructor(props: any) {\n        super(props);\n        socket = io(url, {\n            transports: [\"websocket\"],\n            query: {\n                \"userId\": String(this.props.userIdx),\n                \"pdfId\": String(this.props.pdfIdx)\n            },\n        });\n        \n        this.state = {fp: {}, flag: false};\n        socket.on('connect',() => {\n            socket.once('updateEditorOnce', (value: any) => {\n                this.setState({\n                    fp: value,\n                    flag: true,\n                })\n            })\n        })\n        \n        if (this.props.commitIdx !== -1) {\n            socket.disconnect();\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                {this.state.flag && <TextEditor value={this.state.fp} markdownValue={this.props.markdownValue} commitIdx={this.props.commitIdx} userIdx={this.props.userIdx} pdfIdx={this.props.pdfIdx}/>}\n            </div>\n        )\n    };\n\n    componentWillUnmount() {\n        if (socket != null && socket.connected === true) {\n            // console.log('disconnect');\n            socket.disconnect();\n        }\n    }\n}\n\n/* solution 2 */\nfunction updateEditor(userID : string, pdfID : string, value : any) {\n    timerId = setTimeout(() => {\n        socket.emit(\"updateEditor\", {id: userID, pdfId: pdfID, text: value}, clearTimeout(timerId));\n    }, 700)\n}\n\nasync function updateOrClearEditor(userID: string, pdfID : string, jsonOutput : any) {\n    if (timerId) {\n        clearTimeout(timerId);\n        updateEditor(userID, pdfID, jsonOutput)\n    } else {\n        updateEditor(userID, pdfID, jsonOutput)\n    }\n}\n\nasync function imageHandler(imageSrc : any, userID : string) {\n    const { preSignedUrl, fileName } : any = await getPresignedUrl(userID);\n    const imageFile = await imageSrcToFile(imageSrc, fileName);\n    const imageUrl = `https://label-editor.s3.ap-northeast-2.amazonaws.com/${fileName}`;\n\n    await uploadImageToS3(preSignedUrl.signedUrlPut, imageFile);\n    return imageUrl\n}\n\nasync function getPresignedUrl(userID : string) {\n    try {\n        const randomString = Math.random().toString(36).substring(2, 11);\n        const fileName = `${userID}_${randomString}.png`;\n        const response = await axios.post(\"https://tradingstudy.shop:443/users/sign\", {\n            fileName\n        });\n        return {preSignedUrl: response.data, fileName};\n    } catch (err) {\n        console.log(err);\n    }\n}\n\nasync function imageSrcToFile(imageSrc : any, fileName : any) {\n    var arr = imageSrc.split(','), mime = arr[0].match(/:(.*?);/)[1],\n    bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n    while(n--){\n        u8arr[n] = bstr.charCodeAt(n);\n    }\n    return new File([u8arr], fileName, {type:mime});\n}\n\nasync function uploadImageToS3(preSignedUrl : any, imageFile : any) {\n    const response = await fetch(preSignedUrl, {\n        method: 'PUT',\n        body: imageFile,\n        headers: {\n        'x-amz-acl':'public-read',\n        'Content-Type': 'image/png',\n        },\n    })\n}\n\nexport const TextEditor: FC<{ value: JSONRecord, markdownValue: JSONRecord, commitIdx: number, userIdx: string, pdfIdx: string }> = ({ value, markdownValue, commitIdx, userIdx, pdfIdx }) => {\n    // let readonly = false;\n    // const editable = () => !readonly;\n    const { editor, loading, getInstance } = useEditor((root, renderReact) => {\n                const editor = Editor.make()\n                    .config((ctx) => {\n                        ctx.set(rootCtx, root);\n                        // 처음 생성된 editor라면 빈 화면 생성\n                        // 그게 아니라면 JSON형식으로 DB에서 불러들임\n                        if (commitIdx === -1 && value) {\n                            ctx.set(defaultValueCtx, {\n                                type: \"json\",\n                                value: value,\n                            });    \n                        } else if (commitIdx === -1 && Object.keys(value).length === 0) {\n                            ctx.set(defaultValueCtx, '');  \n                        } else {\n                            ctx.set(defaultValueCtx, {\n                                type: 'json',\n                                value: markdownValue,\n                            })\n                            console.log(markdownValue);\n                        }\n                        \n                        ctx.get(listenerCtx).updated(async (ctx, doc, prevDoc) => {\n                            let jsonOutput = doc.toJSON();\n                            console.log('jsonOutput: ',jsonOutput);\n                            let arrOutput = jsonOutput.content;\n                            for (let i = 0; i < arrOutput.length; i++) {\n                                // html상 dom을 바꿔도 doc은 바뀌지 않는다. 다른것으로 생각해야함.\n                                // JSON 형식으로 DB와 주고받는 것으로 수정\n                                // 한 블록안에 여러개의 이미지를 넣는 경우 처리\n                                if (arrOutput[i].content) {\n                                    for (let j = 0; j < arrOutput[i].content.length; j++) {\n                                        let contentInDoc = arrOutput[i].content[j]\n                                        let contentInDocType = contentInDoc['type']\n                                        let contentAttr = contentInDoc['attrs']\n                                        console.log('contentAttr',contentAttr)\n                                        if (contentAttr !== undefined && !contentAttr['title']) {\n                                            contentAttr['title'] = 'try'\n                                            console.log('it is not stored yet!!')\n                                            let imageSrc = contentAttr['src']\n                                            /* 이미지를 s3 서버에 전달 */\n                                            /* 이미지 url 반환받아서 doc JSON 변경 */\n                                            const imageUrl = await imageHandler(imageSrc, userIdx);\n                                            console.log('imagesrc:', imageUrl)\n                                            contentAttr['src'] = imageUrl;\n                                            // console.log('changed val:',imageSrc);\n                                        }\n                                        else {\n                                            if (contentInDocType === 'image')\n                                            console.log('it is alread loaded!!');\n                                        }\n                                        console.log(arrOutput[i], contentInDoc, contentInDocType);\n                                    }\n                                }\n                            }\n\n                            await updateOrClearEditor(userIdx, pdfIdx, jsonOutput);\n                            \n                            return value;\n                        });\n                    })\n                    .use(block)\n                    .use(menu)\n                    .use(nord)\n                    .use(history)\n                    .use(gfm)\n                    .use(math)\n                    .use(prism)\n                    .use(listener)\n\n                    return editor\n        }, [commitIdx, markdownValue])\n           \n    useEffect(() => {\n        document.querySelector('.ProseMirror.editor')?.setAttribute('ondrop', 'drop_handler(event)');\n        document.querySelector('.ProseMirror.editor')?.setAttribute('ondragover', 'dragover_handler(event)');\n        \n        let height = document.querySelector('.PersonalReading__mainPage')?.clientHeight;\n        if (height != null) {\n            document.querySelector('.milkdown')?.setAttribute('style', `height: ${height - 240}px`);    \n        }\n        \n        if (commitIdx !== -1) {\n            document.querySelector('.ProseMirror.editor')?.setAttribute('contenteditable', 'false');\n        }\n        \n        // document.querySelector('.editor')?.setAttribute('style', 'overflow: scroll !important');\n    });\n    \n    return <ReactEditor editor={editor} />\n};","import { useEffect } from \"react\";\nimport \"./PageRendered.css\";\n\nfunction PageRendered(props) {\n    return (\n        <div dangerouslySetInnerHTML={{ __html: props.html }}></div>\n    );\n}\n\nexport default PageRendered;\n","// extracted by mini-css-extract-plugin\nexport default {\"wrap\":\"HighlightList_wrap__5AIyL\",\"container\":\"HighlightList_container__aHWyH\",\"title\":\"HighlightList_title__hmW+d\",\"highlightInfo\":\"HighlightList_highlightInfo__StQzz\",\"pageNumber\":\"HighlightList_pageNumber__Moyj3\",\"highlightCard\":\"HighlightList_highlightCard__-rmff\",\"highlightColor\":\"HighlightList_highlightColor__CmWNn\",\"highlightedText\":\"HighlightList_highlightedText__4dHKZ\",\"clearHighlight\":\"HighlightList_clearHighlight__mQfsZ\",\"highlightCardWrap\":\"HighlightList_highlightCardWrap__AwEUm\",\"highlightCardTitle\":\"HighlightList_highlightCardTitle__VX35G\",\"trashIconGreen\":\"HighlightList_trashIconGreen__gzOUS\",\"trashIconPurple\":\"HighlightList_trashIconPurple__Y9Yw4\",\"trashIconYellow\":\"HighlightList_trashIconYellow__eALqN\"};","// extracted by mini-css-extract-plugin\nexport default {\"searchBar\":\"SearchBar_searchBar__nTkuX\",\"search\":\"SearchBar_search__rUkCI\",\"searchButton\":\"SearchBar_searchButton__kyrsF\",\"searchInput\":\"SearchBar_searchInput__64lOR\"};","import axios from 'axios';\nimport { useEffect } from 'react';\nimport styles from './SearchBar.module.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faMagnifyingGlass } from '@fortawesome/free-solid-svg-icons';\n\nfunction SearchBar(props) { \n    function handleSubmit(event) {\n        event.preventDefault();\n    }\n    \n    function handleSearchChange(event) {\n        if (event.target.value === '') {\n            async function getInitialHighlightData() {\n                await axios.get(`https://inkyuoh.shop/highlights/pdfs/${props.pdfIdx}/pages/${props.currentPageNumber}`)\n                    .then((response) => {\n                        console.log('Search highlight data response:', response);\n                        props.setHighlightData(response.data.result)\n                    })\n                    .catch((error) => {\n                        console.log('Search highlight data Fail, error:', error);\n                    })\n            }\n    \n            getInitialHighlightData();\n        } else {\n            async function getHighlightData() {\n                await axios.get(`https://inkyuoh.shop/pdfs/${props.pdfIdx}/highlights/search?keyword=${event.target.value}`)\n                    .then((response) => {\n                        console.log('Search highlight data response:', response);\n                        props.setHighlightData(response.data.result);\n                    })\n                    .catch((error) => {\n                        console.log('Search highlight data Fail, error:', error);\n                    })\n            }\n            \n            getHighlightData();\n        }\n    }\n    \n    return (\n        <form className={styles.searchBar} onSubmit={(event) => { handleSubmit(event) }}>\n            <button className={styles.searchButton}>\n                <FontAwesomeIcon icon={faMagnifyingGlass} className={styles.searchIcon}></FontAwesomeIcon>\n            </button>\n            <input className={styles.searchInput} type=\"text\" id=\"search\" onChange={handleSearchChange} placeholder={'검색어를 입력해주세요.'}></input>\n        </form>\n    )\n}\n\nexport default SearchBar;","import IconButton from \"@mui/material/IconButton\";\nimport TurnedInIcon from '@mui/icons-material/TurnedIn';\nimport Badge from '@mui/material/Badge';\n\nfunction HighlightBadge() {\n    function notificationsLabel(count) {\n        if (count === 0) {\n            return 'no notifications';\n        }\n        \n        if (count > 99) {\n            return 'more than 99 notification';\n        }\n        \n        return `${count} notification`;\n    }\n    \n    return (\n        <IconButton aria-label={notificationsLabel(100)}>\n            <Badge badgeContent={100} color=\"secondary\">\n                <TurnedInIcon></TurnedInIcon>\n            </Badge>\n        </IconButton>\n    )\n}\n\nexport default HighlightBadge;","import styles from \"./HighlightList.module.css\";\nimport axios from \"axios\";\nimport { useState, useEffect, useRef } from \"react\";\nimport SearchBar from '../SearchBar/SearchBar.js';\nimport HighlightBadge from './HighlightBadge/HighlightBadge.js';\nimport Card from \"@mui/material/Card\";\nimport CardContent from \"@mui/material/CardContent\";\nimport CardHeader from \"@mui/material/CardHeader\";\nimport Typography from \"@mui/material/Typography\";\nimport Avatar from \"@mui/material/Avatar\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\nimport IconButton from \"@mui/material/IconButton\";\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nfunction HighlightList(props) {\n    const [highlightData, setHighlightData] = useState([]);\n    \n    useEffect(() => {\n        if (props.commitIdx === -1) {\n            async function getHighlightData() {\n                await axios.get(`https://inkyuoh.shop/highlights/pdfs/${props.pdfIdx}/pages/${props.currentPageNumber}`)\n                    .then((response) => {\n                        setHighlightData(response.data.result);\n                    });\n            }\n            \n            getHighlightData();\n        }\n        \n        else {\n            async function getHighlightData() {\n                await axios.get(`https://inkyuoh.shop/highlights/pages/${props.currentPageNumber}/commitIdx/${props.commitIdx}`)\n                    .then((response) => {\n                        setHighlightData(response.data.result);\n                    })\n            }\n            \n            getHighlightData();\n        }\n    }, [props.currentPageNumber, props.updateHighlightList, props.commitIdx]);\n\n    return (\n        <>\n            <div className={styles.title}>Highlights</div>\n            <SearchBar pdfIdx={props.pdfIdx} currentPageNumber={props.currentPageNumber} highlightData={highlightData} setHighlightData={setHighlightData}></SearchBar>\n            <div className={styles.highlightInfo}>\n                <p className={styles.pageNumber}>Page {props.currentPageNumber} / {props.totalPage}</p>\n                {/* <HighlightBadge></HighlightBadge> */}\n            </div>\n            <aside className={styles.wrap}>\n                <div className={styles.container}>\n                    <HighlightCards\n                        commitIdx={props.commitIdx}\n                        pdfIdx={props.pdfIdx}\n                        highlightData={highlightData}\n                        setHighlightData={setHighlightData}\n                        style={{ overflow: \"scroll\" }}\n                        updateHighlightList={props.updateHighlightList}\n                        setUpdateHighlightList={props.setUpdateHighlightList}\n                        currentPageNumber={props.currentPageNumber}\n                    ></HighlightCards>\n                </div>\n            </aside>\n        </>\n    );\n}\n\nfunction HighlightCards(props) {\n    function dragStart_handler(event) {\n        event.dataTransfer.setData(\"text/plain\", event.target.innerHTML);\n    }\n\n    async function deleteHighlight(commitIdx, highlightIdx, setHighlightData, updateHighlightList, setUpdateHighlightList, currentPageNumber) {\n        \n        if (commitIdx === -1) {\n            await axios.delete(`https://inkyuoh.shop/highlights/${highlightIdx}`)\n                .then((response) => {\n                    console.log(\"highlight delete response:\", response);\n                })\n                .catch((error) => {\n                    console.log(\"highlight delete error:\", error);\n                })\n                .then(async () => {\n                    await axios.get(`https://inkyuoh.shop/highlights/pdfs/${props.pdfIdx}/pages/${currentPageNumber}`)\n                        .then((response) => {\n                            setHighlightData(response.data.result);\n                            setUpdateHighlightList(!updateHighlightList);\n                            const selectedHighlight = document.getElementsByClassName('highlight' + highlightIdx);\n                            \n                            for (let i = 0; i < selectedHighlight.length; i++) {\n                                if (selectedHighlight[i].classList.contains('highlightedGreen') === true) {\n                                    selectedHighlight[i].classList.remove('highlightedGreen');\n                                }\n                                \n                                if (selectedHighlight[i].classList.contains('highlightedPurple') === true) {\n                                    selectedHighlight[i].classList.remove('highlightedPurple');\n                                }\n                                \n                                if (selectedHighlight[i].classList.contains('highlightedYellow') === true) {\n                                    selectedHighlight[i].classList.remove('highlightedYellow');\n                                }\n                            }\n                        })\n                })\n        }\n    }\n    console.log(props);\n    return (\n        <>\n            {props.highlightData?.map(function (element, index) {\n                return (\n                    <>\n                        <Card sx={{ width: '100%', minWidth: 275, marginBottom: 1 }} key={index}>\n                            <CardHeader \n                                sx={{ paddingBottom: 0 }}\n                                avatar={<Avatar sx={{ width: 10, height: 10, bgcolor: element.color === 0 ? '#93E7A2' : element.color === 1 ? '#9747FF' : element.color === 2 ? '#FFD644' : null}} \n                                aria-label=\"recipe\">{\"\"}</Avatar>}\n                                title={<p style={{ color: \"#DDDDDD\" }}></p>}\n                                action={props.commitIdx === -1 ?\n                                    <IconButton onClick={() => { deleteHighlight( props.commitIdx, element.highlightIdx, props.setHighlightData, props.updateHighlightList, props.setUpdateHighlightList, props.currentPageNumber ); }}>\n                                        <ClearIcon fontSize=\"small\"></ClearIcon>\n                                    </IconButton>\n                                    : null\n                                }\n                            /><CardContent sx={{ paddingTop: '4px'}}>\n                                <Typography sx={{ fontSize: 14 }} color=\"text.secondary\" draggable=\"true\" onDragStart={(event) => { dragStart_handler(event); }}>\n                                    {element.data}\n                                </Typography>\n                            </CardContent>\n                        </Card>\n                    </>\n                );\n            })}\n        </>\n    );\n}\n\nexport default HighlightList;\n","// extracted by mini-css-extract-plugin\nexport default {\"sideBarContents\":\"SideBar_sideBarContents__KmwNy\",\"bookInfo\":\"SideBar_bookInfo__+AGC2\",\"bookImage\":\"SideBar_bookImage__o80DQ\",\"bookTitle\":\"SideBar_bookTitle__4hT75\",\"historyContainer\":\"SideBar_historyContainer__laxyt\",\"historyTitle\":\"SideBar_historyTitle__iYLbi\",\"historyInput\":\"SideBar_historyInput__3t5Oq\",\"historyWrap\":\"SideBar_historyWrap__Ih9xV\",\"historyUnorderedListTag\":\"SideBar_historyUnorderedListTag__KWQHM\",\"historyMessage\":\"SideBar_historyMessage__kdmFK\",\"historyDate\":\"SideBar_historyDate__Vax62\",\"sideBarToggleButton\":\"SideBar_sideBarToggleButton__D3HGR\"};","// mui\nimport { styled } from '@mui/material/styles';\nimport Switch from '@mui/material/Switch';\n\nconst ShowAndHideSwitch = styled((props) => (\n    <Switch focusVisibleClassName=\".Mui-focusVisible\" disableRipple {...props} />\n  ))(({ theme }) => ({\n    width: 42,\n    height: 26,\n    padding: 0,\n    '& .MuiSwitch-switchBase': {\n      padding: 0,\n      margin: 2,\n      transitionDuration: '300ms',\n      '&.Mui-checked': {\n        transform: 'translateX(16px)',\n        color: '#fff',\n        '& + .MuiSwitch-track': {\n          backgroundColor: theme.palette.mode === 'dark' ? '#2ECA45' : '#93E8DE',\n          opacity: 1,\n          border: 0,\n        },\n        '&.Mui-disabled + .MuiSwitch-track': {\n          opacity: 0.5,\n        },\n      },\n      '&.Mui-focusVisible .MuiSwitch-thumb': {\n        color: '#33cf4d',\n        border: '6px solid #fff',\n      },\n      '&.Mui-disabled .MuiSwitch-thumb': {\n        color:\n          theme.palette.mode === 'light'\n            ? theme.palette.grey[100]\n            : theme.palette.grey[600],\n      },\n      '&.Mui-disabled + .MuiSwitch-track': {\n        opacity: theme.palette.mode === 'light' ? 0.7 : 0.3,\n      },\n    },\n    '& .MuiSwitch-thumb': {\n      boxSizing: 'border-box',\n      width: 22,\n      height: 22,\n    },\n    '& .MuiSwitch-track': {\n      borderRadius: 26 / 2,\n      backgroundColor: theme.palette.mode === 'light' ? '#E9E9EA' : '#39393D',\n      opacity: 1,\n      transition: theme.transitions.create(['background-color'], {\n        duration: 500,\n      }),\n    },\n  }));\n  \n  export default ShowAndHideSwitch;","import axios from 'axios';\nimport { useEffect, useState, useRef } from 'react';\nimport styles from './SideBar.module.css'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleRight, faAngleLeft } from '@fortawesome/free-solid-svg-icons';\nimport dayjs from 'dayjs';\n\n// mui\nimport Stack from '@mui/material/Stack';\nimport Button from '@mui/material/Button';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert from '@mui/material/Alert';\nimport * as React from 'react';\n\nfunction SideBar(props) {\n\tconst [sideBarStatus, setSideBarStatus] = useState(false);\n\tconst [commitsInfo, setCommitsInfo] = useState([]);\n\tconst commitInput = useRef();\n\tconst date = dayjs();\n\tconst result = date.format('YYYY-MM-DD HH:mm:ss');\n\t\n\tlet userIdx = 58;\n\t\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault();\n\t\t\n\t\tif (commitInput.current.value !== '') {\t\t\t\n\t\t\taxios.post('https://inkyuoh.shop/commits', {\n\t\t\t\t\tpdfIdx: props.currentBookInfo.pdfIdx,\n\t\t\t\t\tuserIdx: userIdx,\n\t\t\t\t\tcreatedAt: result,\n\t\t\t\t\tcommitMessage: commitInput.current.value\n\t\t\t\t})\n\t\t\t\t.then((response) => {\t\t\t\t\t\n\t\t\t\t\tconsole.log('Commit response:', response);\n\t\t\t\t\taxios.get(`https://inkyuoh.shop/commits/users/${userIdx}/books/${props.currentBookInfo.pdfIdx}`)\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tconsole.log('Reset commitsInfo response:', response);\n\t\t\t\t\t\t\tsetCommitsInfo(response?.data?.result?.reverse());\n\t\t\t\t\t\t\tsetShowSnackBar(true);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tconsole.log('Reset commitsInfo Fail, error:', error);\n\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.log('Commit Fail, error:', error);\n\t\t\t\t})\n\t\t\t\t\n\t\t\tcommitInput.current.value = null;\n\t\t} else {\n\t\t\tsetShowErrorSnackBar(true);\n\t\t}\n\t}\n\t\n\tuseEffect(() => {\n\t\taxios.get(`https://inkyuoh.shop/commits/users/${userIdx}/books/${props.currentBookInfo.pdfIdx}`)\n\t\t\t.then((response) => {\n\t\t\t\tconsole.log(response);\n\t\t\t\tsetCommitsInfo(response?.data?.result?.reverse());\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t})\n\t}, [sideBarStatus])\n\t\n\t// snack bar\n\tconst [showSnackBar, setShowSnackBar] = useState(false);\n\tconst [showErrorSnackBar, setShowErrorSnackBar] = useState(false);\n\t\n    const handleClose = (event, reason) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n        \n        setShowSnackBar(false);\n\t\tsetShowErrorSnackBar(false);\n    }\n    \n    const Alert = React.forwardRef(function Alert(props, ref) {\n        return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props}></MuiAlert>\n    })\n\n\treturn (\n\t\t<>\t\n\t\t\t<div className={styles.sideBarContents} style={sideBarStatus === true ? {} : {display: 'none'}}>\n\t\t\t\t<div className={styles.bookInfo}>\n\t\t\t\t\t<div className={styles.bookImage} style={{backgroundImage: \"url(\" + `${process.env.PUBLIC_URL + `${props.currentBookInfo.firstPageLink}`}`}}></div>\n\t\t\t\t\t<p className={styles.bookTitle}>{props.currentBookInfo.pdfName}</p>\n\t\t\t\t</div>\n\t\t\t\t<hr style={{ width: '100%', marginTop: 24, marginBottom: 24, marginLeft: 16, marginRight: 16 }}></hr>\n\t\t\t\t<div className={styles.historyContainer}>\n\t\t\t\t\t<div className={styles.historyTitle}>Commit</div>\n\t\t\t\t\t<form onSubmit={(event) => { handleSubmit(event)} }>\n\t\t\t\t\t\t<input ref={commitInput} className={styles.historyInput} placeholder={'기록을 남기세요.'}></input>\n\t\t\t\t\t</form>\n\t\t\t\t\t<div className={styles.historyWrap}>\n\t\t\t\t\t\t<History commitIdx={props.commitIdx} setCommitIdx={props.setCommitIdx} commitsInfo={commitsInfo}></History>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<Stack spacing={2} sx={{ width: '100%'}}>\n\t\t\t\t\t<Snackbar open={showSnackBar} autoHideDuration={4500} onClose={handleClose}>\n\t\t\t\t\t\t<Alert onClose={handleClose} severity=\"success\" sx={{width: '100%'}}>\n\t\t\t\t\t\t\t저장이 완료되었습니다.\n\t\t\t\t\t\t</Alert>\n\t\t\t\t\t</Snackbar>\n\t\t\t\t\t<Snackbar open={showErrorSnackBar} autoHideDuration={4500} onClose={handleClose}>\n\t\t\t\t\t\t<Alert onClose={handleClose} severity=\"error\" sx={{width: '100%'}}>\n\t\t\t\t\t\t\t기록 내용을 작성해주시기 바랍니다.\n\t\t\t\t\t\t</Alert>\n\t\t\t\t\t</Snackbar>\n\t\t\t\t</Stack>\n\t\t\t</div>\n\t\t\t<FontAwesomeIcon icon={sideBarStatus === true ? faAngleLeft : faAngleRight} className={styles.sideBarToggleButton} onClick={() => {setSideBarStatus(!sideBarStatus);}}></FontAwesomeIcon>\n\t\t</>\n\t)\n}\n\nfunction History(props) {\n\tfunction rollback(element) {\n\t\tprops.setCommitIdx(element.commitIdx);\n\t}\n\t\n\treturn (\n\t\t<>\n\t\t\t{props.commitsInfo?.map(function(element, index) {\n\t\t\t\treturn (\n\t\t\t\t\t<ul className={styles.historyUnorderedListTag} key={index} onClick={() => {\n\t\t\t\t\t\trollback(element);\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<p className={styles.historyMessage}>{element.commitMessage}</p>\n\t\t\t\t\t\t\t<p className={styles.historyDate}>{element.createdAt}</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t)\n\t\t\t})}\n\t\t</>\n\t)\n}\n\nexport default SideBar;","import axios from 'axios';\nimport $ from 'jquery';\n\n// PDF Download\nimport html2canvas from 'html2canvas';\nimport jsPDF from 'jspdf';\nimport { create } from '@mui/material/styles/createTransitions';\n\n// Highlighting Logic\nfunction drawHighlight(range, node) {\n    node.appendChild(range.extractContents());\n    range.insertNode(node);\n}\n\nfunction doHighlight(highlightData, highlightIdx) {\n    const yOfSelectedStartContainer = highlightData.startLine;\n    const offsetOfSelectedStartContainer = highlightData.startOffset;\n    const indexOfSelectedStartContainer = highlightData.startNode;\n\n    const yOfSelectedEndContainer = highlightData.endLine;\n    const offsetOfSelectedEndContainer = highlightData.endOffset;\n    const indexOfSelectedEndContainer = highlightData.endNode;\n\n    const decimalYOfSelectedStartContainer = parseInt( yOfSelectedStartContainer.slice(1), 16);\n    const decimalYOfSelectedEndContainer = parseInt( yOfSelectedEndContainer.slice(1), 16);\n    \n    let highlightColor;\n    \n    if (highlightData.color === 0) {\n        highlightColor = 'highlightedGreen';\n    }\n    \n    if (highlightData.color === 1) {\n        highlightColor = 'highlightedPurple';\n    }\n    \n    if (highlightData.color === 2) {\n        highlightColor = 'highlightedYellow';\n    }\n    \n    // currentElement를 잘 잡지 못해서 에러가 난다.\n    for ( let i = decimalYOfSelectedStartContainer; i <= decimalYOfSelectedEndContainer; i++) {\n        const currentElement = document.getElementsByClassName( `y${i.toString(16)}`)[0];\n        const newRange = document.createRange();\n\n        const newNode = document.createElement(\"span\");\n        \n        // delete 시 곧바로 삭제할 수 있도록 미리 class를 더해놓음.\n        // 나중에 지울 때 class를 통해 곧바로 노드를 찾아서 highlighted 클래스를 제거하면 됨.\n        \n        newNode.classList.add(highlightColor);\n        newNode.classList.add('highlight' + highlightIdx);\n        if ( decimalYOfSelectedStartContainer === decimalYOfSelectedEndContainer) {\n            newRange.setStart( currentElement?.childNodes[indexOfSelectedStartContainer], offsetOfSelectedStartContainer);\n            newRange.setEnd( currentElement?.childNodes[indexOfSelectedEndContainer], offsetOfSelectedEndContainer);\n\n            drawHighlight(newRange, newNode);\n            return;\n        }\n\n        if (i === decimalYOfSelectedStartContainer) {\n            newRange.setStart( currentElement?.childNodes[indexOfSelectedStartContainer], offsetOfSelectedStartContainer);\n            newRange.setEnd( currentElement?.childNodes[currentElement.childNodes.length - 1], currentElement.childNodes[currentElement.childNodes.length - 1].length);\n        } else if (i === decimalYOfSelectedEndContainer) {\n            newRange.setStart(currentElement?.childNodes[0], 0);\n            newRange.setEnd( currentElement?.childNodes[indexOfSelectedEndContainer], offsetOfSelectedEndContainer);\n        } else {\n            newRange.setStart(currentElement?.childNodes[0], 0);\n            newRange.setEnd( currentElement?.childNodes[currentElement.childNodes.length - 1], currentElement.childNodes[currentElement.childNodes.length - 1].length);\n        }\n\n        drawHighlight(newRange, newNode);\n    }\n}\n\nfunction clickHighlight( pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, color ) {\n    const selectedText = window.getSelection().toString().trim();\n    const selectedRange = window.getSelection().getRangeAt(0);\n\n    // 같은 Text를 거꾸로 drag해도 selectedStartContainer와 selectedEndContainer는 동일하다.\n    const selectedStartContainer = window.getSelection().getRangeAt(0).startContainer;\n    const selectedEndContainer = window.getSelection().getRangeAt(0).endContainer;\n    const parentElementOfSelectedStartContainer = selectedStartContainer.parentElement;\n    const parentElementOfSelectedEndContainer = selectedEndContainer.parentElement;\n\n    const offsetOfSelectedStartContainer = selectedRange.startOffset;\n    let indexOfSelectedStartContainer = 0;\n    for ( let i = 0; i < parentElementOfSelectedStartContainer.childNodes.length; i++ ) {\n        if ( parentElementOfSelectedStartContainer.childNodes[i] === selectedStartContainer ) {\n            indexOfSelectedStartContainer = i;\n        }\n    }\n\n    // end는 마지막을 초과해서 포함하는 것 같다.\n    const offsetOfSelectedEndContainer = selectedRange.endOffset;\n    let indexOfSelectedEndContainer = 0;\n\n    for ( let i = 0; i < parentElementOfSelectedEndContainer.childNodes.length; i++) {\n        if ( parentElementOfSelectedEndContainer.childNodes[i] === selectedEndContainer ) {\n            indexOfSelectedEndContainer = i;\n        }\n    }\n    \n    function recur(x, count) {\n        if (x.classList.toString().includes(\"y\") === true) {\n            return x.classList;\n        }\n\n        return recur(x.parentElement, count + 1);\n    }\n\n    let yOfSelectedStartContainer = recur( parentElementOfSelectedStartContainer, 0 )[4];\n    let yOfSelectedEndContainer = recur( parentElementOfSelectedEndContainer, 0 )[4];\n    \n    let highlightColorIndex;\n    \n    if (color === 'highlightedGreen') {\n        highlightColorIndex = 0;\n    }\n    \n    if (color === 'highlightedPurple') {\n        highlightColorIndex = 1;\n    }\n    \n    if (color === 'highlightedYellow') {\n        highlightColorIndex = 2;\n    }\n    \n    const highlightData = {\n        pdfIdx: pdfIdx,\n        pageNum: currentPageNumber,\n        startLine: yOfSelectedStartContainer,\n        startOffset: offsetOfSelectedStartContainer,\n        startNode: indexOfSelectedStartContainer,\n        endLine: yOfSelectedEndContainer,\n        endOffset: offsetOfSelectedEndContainer,\n        endNode: indexOfSelectedEndContainer,\n        data: selectedText,\n        color: highlightColorIndex\n    };\n\n    axios.post(\"https://inkyuoh.shop/highlights\", {\n            pdfIdx: pdfIdx,\n            pageNum: currentPageNumber,\n            startLine: yOfSelectedStartContainer,\n            startOffset: offsetOfSelectedStartContainer,\n            startNode: indexOfSelectedStartContainer,\n            endLine: yOfSelectedEndContainer,\n            endOffset: offsetOfSelectedEndContainer,\n            endNode: indexOfSelectedEndContainer,\n            data: selectedText,\n            color: highlightColorIndex,\n        })\n        .then((response) => {\n            console.log(\"Highlight POST Success\\nresponse:\", response);\n            setUpdateHighlightList(!updateHighlightList);\n        })\n        .catch((error) => {\n            console.log(\"Highlight POST Fail\\nerror:\", error);\n        })\n        .then(() => {\n            axios.get(`https://inkyuoh.shop/highlights/pdfs/${pdfIdx}/pages/${currentPageNumber}`)\n                .then((response) => {\n                    doHighlight(highlightData, response.data.result[response.data.result.length - 1].highlightIdx);\n                })\n        })\n\n    highlightButtonsWrap.current.style.display = \"none\";\n}\n\n// Turn over functions\nfunction turnOver(direction, currentPageNumber, setCurrentPageNumber, totalPage) {\n    if (direction === 'back') {\n        if (currentPageNumber === 1) {\n            return;\n        }\n        \n        setCurrentPageNumber((currentPageNumber) => currentPageNumber - 1);\n    }\n    \n    if (direction === 'go') {\n        if(currentPageNumber === totalPage) {\n            return;\n        }\n        \n        setCurrentPageNumber((currentPageNumber) => currentPageNumber + 1);\n    }\n}\n\n// function toPdf(pdfName) {\n//     document.querySelector('.editor')?.setAttribute('style', 'overflow: visible !important');\n//     document.querySelector('.editor')?.setAttribute('style', 'height: auto !important');\n    \n//     html2canvas(document.querySelector('.editor')).then((canvas) => {\n//         console.log(canvas);\n//         var imgData = canvas.toDataURL('image/png');\n\n//         var imgWidth = 180; \n//         var pageHeight = imgWidth * 1.414;  \n//         var imgHeight = canvas.height * imgWidth / canvas.width;\n//         var heightLeft = imgHeight;\n//         var margin = 20;\n\n//         var doc = new jsPDF('p', 'mm', 'a4');\n//         var position = 0;\n\n//         doc.addImage(imgData, 'PNG', margin, position, imgWidth, imgHeight);\n//         heightLeft -= pageHeight;\n\n//         while (heightLeft >= 0) {\n//             position = heightLeft - imgHeight;\n//             doc.addPage();\n//             doc.addImage(imgData, 'PNG', margin, position, imgWidth, imgHeight);\n//             heightLeft -= pageHeight;\n//         }\n//         doc.save(`${pdfName}.pdf`);\n//     })\n    \n//     document.querySelector('.editor')?.setAttribute('style', 'overflow: scroll !important');\n//     document.querySelector('.editor')?.setAttribute('style', 'height: 100% !important');\n// }\n\nfunction toPdf(pdfName) {\n    document.querySelector('.editor')?.setAttribute('style', 'overflow: visible !important');\n    document.querySelector('.editor')?.setAttribute('style', 'height: auto !important');\n    // document.querySelectorAll('.editor > *').forEach((element) => {\n    //     element.setAttribute('style', 'margin: 12px;');\n    // })\n    \n    // A4 => 297mm x 210mm\n    let renderedImg = new Array();\n    let contentWidth = 180;\n    let padding = 15;\n    \n    createPdf();\n    \n    function generateCanvas(i, doc, deferred, currentList) {\n        let pdfWidth = $(currentList).outerWidth() * 0.2645;\n        let pdfHeight = $(currentList).outerHeight() * 0.2645;\n        let heightCalculate = contentWidth * pdfHeight / pdfWidth;\n        \n        html2canvas(currentList).then(\n            function (canvas) {\n                let img = canvas.toDataURL('image/jpeg', 1.0);\n                renderedImg.push({num: i, image: img, height: heightCalculate});\n                deferred.resolve();\n            }\n        )\n    }\n    \n    function createPdf() {\n        let lists = document.querySelectorAll('.editor > *');\n        console.log(lists);\n        let deferreds = [];\n        let doc = new jsPDF('p', 'mm', 'a4');\n        \n        for (let i = 0; i < lists.length; i++) {\n            let deferred = $.Deferred();\n            deferreds.push(deferred.promise());\n            generateCanvas(i, doc, deferred, lists[i]);\n        }\n        \n        $.when.apply($, deferreds).then(function () {\n            let sorted = renderedImg.sort(function(a, b) {\n                return a.num < b.num ? -1 : 1;\n            })\n            let currentHeight = padding;\n            \n            for (let i = 0; i < sorted.length; i++) {\n                let sortedHeight = sorted[i].height;\n                let sortedImage = sorted[i].image;\n                \n                if ( currentHeight + sortedHeight > 297 - padding * 2) {\n                    doc.addPage();\n                    currentHeight = padding;\n                    doc.addImage(sortedImage, 'jpeg', padding, currentHeight, contentWidth, sortedHeight);\n                    currentHeight += sortedHeight;\n                } else {\n                    doc.addImage(sortedImage, 'jpeg', padding, currentHeight, contentWidth, sortedHeight);\n                    currentHeight += sortedHeight;\n                }\n            }\n            \n            doc.save(`${pdfName}.pdf`);\n            \n            currentHeight = padding;\n            renderedImg = new Array();\n        })\n    }\n    \n    document.querySelector('.editor')?.setAttribute('style', 'overflow: scroll !important');\n    document.querySelector('.editor')?.setAttribute('style', 'height: 100% !important');\n}\n\nexport { clickHighlight, doHighlight, turnOver, toPdf };","import \"./PersonalReading.css\";\nimport axios from 'axios';\nimport { useState, useEffect, useRef } from \"react\";\nimport { useLocation } from 'react-router-dom';\nimport { useCookies } from 'react-cookie';\nimport $ from 'jquery';\n\n// sideComponents\nimport { WrapperTextEditor } from \"./sideComponents/TextEditor/TextEditor.tsx\";\nimport PageRendered from \"./sideComponents/PageRendered/PageRendered.js\";\nimport HighlightList from \"./sideComponents/HighlightList/HighlightList.js\";\nimport ShowAndHideSwitch from \"./sideComponents/ShowAndHideSwitch/ShowAndHideSwitch.js\";\nimport SideBar from './sideComponents/SideBar/SideBar.js';\n\n// sideFunction for highlighting\nimport { clickHighlight, doHighlight, turnOver, toPdf } from './sideFunction/sideFunction';\n\n// fontawesome\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCaretLeft, faCaretRight } from '@fortawesome/free-solid-svg-icons';\nimport { faFilePdf } from '@fortawesome/free-solid-svg-icons';\n\nfunction PersonalReading(props) {\n    const location = useLocation();\n    const { pdfIdx, recentlyReadPage } = location.state;\n    const [html, setHtml] = useState('');\n    const [updateHighlightList, setUpdateHighlightList] = useState(true);\n    const [commitIdx, setCommitIdx] = useState(-1);\n    const [markdownValue, setMarkdownValue] = useState({});\n    const [highlightData, setHighlightData] = useState([]);\n     \n    const highlightButtonsWrap = useRef();\n    const highlightButton = useRef();\n    const highlightButtonPurple = useRef();\n    const highlightButtonYellow = useRef();\n    \n    // 수정 필요, props로 받아야 할 듯.\n    // library에서 넘어올 때 currentPageNumber를 유저로부터 가져와야 함.\n    // redux?\n    const [currentPageNumber, setCurrentPageNumber] = useState(recentlyReadPage);\n    \n    // library에서 넘어올 때 받아와야 할 듯.\n    // useLocation\n    let userIdx = 58;\n    \n    // let [totalPage, setTotalPage] = useState(1);\n    const [currentBookInfo, setCurrentBookInfo] = useState({});\n    \n    useEffect(() => {\n        // console.log('hello1');\n        axios.get(`https://inkyuoh.shop/users/${userIdx}/pdfs`)\n            .then((response) => {\n                console.log('TotalPage GET response:', response);\n                let newCurrentBookInfo = response.data.result.find(x => x.pdfIdx === pdfIdx);\n                // setTotalPage(nowPdf.totalPage)\n                setCurrentBookInfo(newCurrentBookInfo);\n            })\n            .catch((error) => {\n                console.log('TotalPage GET Fail, error:', error);\n            })\n    }, [pdfIdx])\n\n    useEffect(() => {\n        if (commitIdx === -1) {\n            const getPageLink = async () => {\n                const pageLink = await axios.get(`https://inkyuoh.shop/pdfs/${pdfIdx}/pages/${currentPageNumber}`).then((response) => {\n                    return response.data.result.pageLink;\n                });\n                \n                const getHtml = await axios.get(`${pageLink}`).then((response) => {\n                    setHtml(response.data);\n                });\n                \n                const getHighlightData = await axios.get(`https://inkyuoh.shop/highlights/pdfs/${pdfIdx}/pages/${currentPageNumber}`).then((response) => {\n                    setHighlightData(response.data.result);\n                })\n            }\n            \n            getPageLink();\n        } else {\n            const getPageLink = async () => {\n                const pageLink = await axios.get(`https://inkyuoh.shop/pdfs/${pdfIdx}/pages/${currentPageNumber}`).then((response) => {\n                    return response.data.result.pageLink;\n                });\n                \n                const getHtml = await axios.get(`${pageLink}`).then((response) => {\n                    setHtml(response.data);\n                });\n                \n                const getHighlightData = await axios.get(`https://inkyuoh.shop/highlights/pages/${currentPageNumber}/commitIdx/${commitIdx}`).then((response) => {\n                    setHighlightData(response.data.result);\n                })\n            }\n\n            getPageLink();\n        }\n        \n        \n        \n        // if (commitIdx === -1) {\n        //     axios.get(`https://inkyuoh.shop/pdfs/${pdfIdx}/pages/${currentPageNumber}`)\n        //         .then((response) => {\n        //             console.log('pageLink GET response:', response);      \n                    \n        //             return response.data.result.pageLink;\n        //         })\n        //         .catch((error) => {\n        //             console.log('pageLink GET Fail, error:', error);\n        //         })\n        //         .then((pageLink) => {\n        //             axios.get(`${pageLink}`)\n        //                 .then((response) => {\n        //                     console.log('html GET response:', response);\n        //                     setHtml(response.data);\n        //                 })\n        //         })\n        //         .catch((error) => {\n        //             console.log('html GET Fail, error:', error);\n        //         })\n        //         .then(() => {\n        //             axios.get(`https://inkyuoh.shop/highlights/pdfs/${pdfIdx}/pages/${currentPageNumber}`)\n        //                 .then((response) => {\n        //                     console.log('highlight data GET response:', response);\n        //                     setHighlightData(response.data.result);\n        //                 })\n        //                 // .catch((error) => {\n        //                 //     console.log('highlight data GET Fail, error:', error);\n        //                 // })\n        //         })\n        // } else {\n        //     axios.get(`https://inkyuoh.shop/pdfs/${pdfIdx}/pages/${currentPageNumber}`)\n        //         .then((response) => {\n        //             console.log('pageLink GET response:', response);      \n                    \n        //             return response.data.result.pageLink;\n        //         })\n        //         .catch((error) => {\n        //             console.log('pageLink GET Fail, error:', error);\n        //         })\n        //         .then((pageLink) => {\n        //             axios.get(`${pageLink}`)\n        //                 .then((response) => {\n        //                     console.log('html GET response:', response);\n        //                     setHtml(response.data);\n        //                 })\n        //         })\n        //         .catch((error) => {\n        //             console.log('html GET Fail, error:', error);\n        //         })\n        //         .then(() => {\n        //             axios.get(`https://inkyuoh.shop/highlights/pages/${currentPageNumber}/commitIdx/${commitIdx}`)\n        //                 .then((response) => {\n        //                     console.log('Commit highlight data GET response:', response);\n        //                     setHighlightData(response.data.result);\n        //                 })\n        //         })\n        // }\n        \n    }, [currentPageNumber, props.mode, commitIdx])\n    \n    useEffect(() => {\n        // console.log('hello3');\n        // html이 바뀔 때, 전 페이지를 잡는 에러가 있어서 추가.\n        // if (commitIdx === -1) {\n        //     axios.get(`https://inkyuoh.shop/highlights/pdfs/${pdfIdx}/pages/${currentPageNumber}/`)\n        //         .then((response) => {\n        //             console.log('highlight data GET response:', response);\n                    \n        //             for(let i = 0; i < response.data.result?.length; i++) {\n        //                 setHighlightData(response.data.result);\n        //             }\n        //         })\n        //     // .catch((error) => {\n        //     //     console.log('highlight data GET Fail, error:', error);\n        //     // })\n        // } else {\n        //     axios.get(`https://inkyuoh.shop/highlights/pages/${currentPageNumber}/commitIdx/${commitIdx}`)\n        //         .then((response) => {\n        //             console.log('Commit highlight data GET response:', response);\n        //             setHighlightData(response.data.result);\n        //         })\n        // }\n        \n        function selectableTextAreaMouseUp(event) {\n            const highlightButtonCurrent = highlightButtonsWrap.current;\n\n            setTimeout(() => {\n                if (window.getSelection().toString().trim() != 0) {\n                    const x = event.pageX;\n                    const y = event.pageY;\n\n                    const highlightButtonCurrentWidth = Number(getComputedStyle(highlightButtonCurrent).width.slice(0, -2));\n                    const highlightButtonCurrentHeight = Number(getComputedStyle(highlightButtonCurrent).width.slice(0, -2));\n\n                    highlightButtonCurrent.style.left = `${x - highlightButtonCurrentWidth * 0.5}px`;\n                    highlightButtonCurrent.style.top = `${y - highlightButtonCurrentHeight * 1.0}px`;\n                    highlightButtonCurrent.style.display = \"flex\";\n                    highlightButtonCurrent.classList.add(\"btnEntrance\");\n                }\n            }, 0);\n        }\n        \n        const selectableTextArea = document.querySelectorAll(\".PersonalReading__mainPage--readingPage\");\n\n        selectableTextArea?.forEach((element) => {\n            element?.addEventListener(\"mouseup\", selectableTextAreaMouseUp);\n            element?.addEventListener('touchend', selectableTextAreaMouseUp, false);\n        });\n\n        function documentMouseDown(event) {\n            const highlightButtonCurrent = highlightButtonsWrap.current;\n\n            if (highlightButtonCurrent.style.display === \"flex\" && event.target.classList.contains('specific') === false) {\n                \n                highlightButtonCurrent.style.display = \"none\";\n                highlightButtonCurrent.classList.remove(\"btnEntrance\");\n                window.getSelection().empty();\n            }\n        }\n\n        document.addEventListener(\"mousedown\", documentMouseDown);\n        document.addEventListener('touchstart', documentMouseDown, false);\n\n        return () => {\n            selectableTextArea?.forEach((element) => {\n                element?.removeEventListener(\"mouseup\", selectableTextAreaMouseUp);\n                element?.removeEventListener(\"touchend\", selectableTextAreaMouseUp);\n            });\n            \n            document.removeEventListener(\"mousedown\", documentMouseDown);\n            document.removeEventListener(\"touchstart\", documentMouseDown);\n        };\n    }, [html])\n    \n    // Text Editor Value\n    useEffect(() => {\n        setHtml({...html})\n        \n        if (commitIdx !== -1) {\n            axios.post('https://inkyuoh.shop/commits/books/2/2', {\n                    commitIdx: commitIdx\n                })\n                .then((response) => {\n                    return JSON.parse(response.data.result[0].editorLog);\n                })\n                .then((response) => {\n                    console.log(response);\n                    setMarkdownValue(response);\n                })\n        }\n    }, [commitIdx])\n    \n    // Draw Highlight\n    useEffect(() => {\n        try {\n            for (let i = 0; i < highlightData.length; i++) {\n                doHighlight(highlightData[i], highlightData[i].highlightIdx);\n            }       \n        }\n        catch {\n            // console.log('hello');\n        }\n    }, [highlightData, commitIdx])\n    \n    useEffect(() => {\n        // document.querySelectorAll('.t.h2').forEach((element) => {\n        //     element.style.height = '80px';\n        // })\n        \n        // document.querySelectorAll('.t.h3').forEach((element) => {\n        //     element.style.height = '108px';\n        // })\n        \n        document.querySelectorAll('.c').forEach((element) => {\n            element.style.height = '110%';\n        })\n        \n        document.querySelectorAll('.t').forEach((element) => {\n            element.style.height = '2.1em';\n            // element.style.width = '1.2em';\n        })\n    }, [html])\n      \n    useEffect(() => {      \n        // $('.HighlightButton').on('click touchstart', function() {\n        //     clickHighlight(pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, 'highlightedGreen');\n        // });\n        \n        // $('.HighlightButton__purple').on('click touchstart', function() {\n        //     clickHighlight(pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, 'highlightedPurple');\n        // });\n        \n        // $('.HighlightButton__yellow').on('click touchstart', function() {\n        //     clickHighlight(pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, 'highlightedYellow');\n        // });\n        \n        // return () => {\n        //     $('.HighlightButton').off('touchstart', function() {\n        //         clickHighlight(pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, 'highlightedGreen');\n        //     });\n            \n        //     $('.HighlightButton__purple').off('touchstart', function() {\n        //         clickHighlight(pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, 'highlightedPurple');\n        //     });\n            \n        //     $('.HighlightButton__yellow').off('touchstart', function() {\n        //         clickHighlight(pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, 'highlightedYellow');\n        //     });\n        // }\n    }, [html])\n    \n    return (\n        <main className=\"PersonalReading\">\n            \n            <div ref={highlightButtonsWrap} className=\"HighlightButton__wrap\">\n                <button ref={highlightButton} className=\"HighlightButton specific\"\n                    onTouchStart={() => { clickHighlight(pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, 'highlightedGreen'); }}\n                    onClick={() => { clickHighlight(pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, 'highlightedGreen'); }}\n                ></button>\n                \n                <button ref={highlightButtonPurple} className=\"HighlightButton__purple specific\"\n                    onTouchStart={() => { clickHighlight(pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, 'highlightedPurple'); }}\n                    onClick={() => { clickHighlight(pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, 'highlightedPurple'); }}\n                ></button>\n                \n                <button ref={highlightButtonYellow} className=\"HighlightButton__yellow specific\"\n                    onTouchStart={() => { clickHighlight(pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, 'highlightedYellow'); }}\n                    onClick={() => { clickHighlight(pdfIdx, currentPageNumber, highlightButtonsWrap, updateHighlightList, setUpdateHighlightList, 'highlightedYellow'); }}\n                ></button>\n            </div>\n            \n            <div className=\"PersonalReading__container\">\n                <aside className=\"PersonalReading__sideBar\">\n                    <SideBar commitIdx={commitIdx} setCommitIdx={setCommitIdx} currentBookInfo={currentBookInfo}></SideBar>\n                </aside>\n                \n                <div className=\"PersonalReading__mainPage\" style={props.mode === true ? {flex: 3} : {flex: 1}}>\n                    {props.mode === true ? <article className=\"PersonalReading__mainPage--readingPage\" style={props.mode === true ? {flex: 2} : {flex: 0}}>\n                        <PageRendered className=\"PageRendered\" html={html}></PageRendered>\n                        <div className=\"PersonalReading__mainPage--goBackButtons\">\n                            <FontAwesomeIcon icon={faCaretLeft} className=\"backButton\" \n                                // onClick={() => {turnOver('back', currentPageNumber, setCurrentPageNumber, currentBookInfo.totalPage);}}\n                                onTouchStart={() => {turnOver('back', currentPageNumber, setCurrentPageNumber, currentBookInfo.totalPage);}}\n                            ></FontAwesomeIcon>\n                            <FontAwesomeIcon icon={faCaretRight} className=\"goButton\" \n                                // onClick={() => {turnOver('go', currentPageNumber, setCurrentPageNumber, currentBookInfo.totalPage);}}\n                                onTouchStart={() => {turnOver('go', currentPageNumber, setCurrentPageNumber, currentBookInfo.totalPage);}}\n                            ></FontAwesomeIcon>\n                        </div>\n                        <div className=\"PersonalReading__mainPage--info\">\n                            <p><input className=\"PersonalReading__mainPage--info--input\" placeholder={currentPageNumber} onKeyUp={(event) => {\n                                event.preventDefault();\n                                if (window.event.keyCode === 13 && 1 <= event.target.value && event.target.value <= currentBookInfo.totalPage) {\n                                    setCurrentPageNumber(Number(event.target.value));\n                                    event.target.value = null;\n                                }\n                            }}></input> / {currentBookInfo.totalPage}</p>\n                        </div>\n                    </article> \n                    : null}\n                    <aside className=\"PersonalReading__highlightList\" style={props.mode === true ? {flex: 1} : {flex: 1}}>\n                        <HighlightList commitIdx={commitIdx} setCommitIdx={setCommitIdx} pdfIdx={pdfIdx} totalPage={currentBookInfo.totalPage} currentPageNumber={currentPageNumber} updateHighlightList={updateHighlightList} setUpdateHighlightList={setUpdateHighlightList}></HighlightList>\n                    </aside>\n                </div>\n                \n                <article className=\"PersonalReading__mainPage--textEditor\" style={props.mode === true ? {flex: 1} : {flex: 1}}>\n                    <div className=\"PersonalReading__mainPage--textEditor--wrap\">\n                        <div className=\"PersonalReading__mainPage--textEditor--info\">\n                            <p style={{ fontSize: '16px' }}>{currentBookInfo.pdfName}</p>\n                            <p style={{ fontSize: '12px', textDecoration: 'underline' }}>5분 전에 수정하였습니다.</p>\n                        </div>\n                        <FontAwesomeIcon className=\"ToPdfButton\" icon={faFilePdf} onClick={() => { \n                            setTimeout(() => {\n                                toPdf(currentBookInfo.pdfName);   \n                            }, 100);\n                        }}></FontAwesomeIcon>\n                    </div>\n                    <WrapperTextEditor markdownValue={markdownValue} commitIdx={commitIdx} userIdx={String(userIdx)} pdfIdx={String(pdfIdx)}></WrapperTextEditor>\n                </article>\n            </div>\n        </main>\n    );\n}\n\nexport default PersonalReading;"],"names":["socket","timerId","WrapperTextEditor","props","io","transports","query","String","userIdx","pdfIdx","state","fp","flag","on","once","value","setState","commitIdx","disconnect","this","markdownValue","connected","React","updateEditor","userID","pdfID","setTimeout","emit","id","pdfId","text","clearTimeout","updateOrClearEditor","jsonOutput","imageHandler","imageSrc","getPresignedUrl","preSignedUrl","fileName","imageSrcToFile","imageFile","imageUrl","uploadImageToS3","signedUrlPut","randomString","Math","random","toString","substring","axios","response","data","console","log","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","File","type","fetch","method","body","headers","TextEditor","useEditor","root","renderReact","editor","Editor","config","ctx","set","rootCtx","defaultValueCtx","Object","keys","get","listenerCtx","updated","doc","prevDoc","toJSON","arrOutput","content","i","j","contentInDoc","contentInDocType","contentAttr","undefined","use","block","menu","nord","history","gfm","math","prism","listener","loading","getInstance","useEffect","document","querySelector","setAttribute","height","clientHeight","dangerouslySetInnerHTML","__html","html","className","styles","onSubmit","event","preventDefault","handleSubmit","icon","faMagnifyingGlass","onChange","target","getInitialHighlightData","currentPageNumber","then","setHighlightData","result","catch","error","getHighlightData","placeholder","HighlightCards","highlightIdx","updateHighlightList","setUpdateHighlightList","selectedHighlight","getElementsByClassName","classList","contains","remove","highlightData","map","element","index","Card","sx","width","minWidth","marginBottom","CardHeader","paddingBottom","avatar","Avatar","bgcolor","color","title","style","action","onClick","deleteHighlight","Clear","fontSize","CardContent","paddingTop","Typography","draggable","onDragStart","dataTransfer","setData","innerHTML","dragStart_handler","useState","totalPage","overflow","styled","Switch","focusVisibleClassName","disableRipple","theme","padding","margin","transitionDuration","transform","backgroundColor","palette","mode","opacity","border","grey","boxSizing","borderRadius","transition","transitions","create","duration","History","commitsInfo","setCommitIdx","rollback","commitMessage","createdAt","sideBarStatus","setSideBarStatus","setCommitsInfo","commitInput","useRef","dayjs","format","currentBookInfo","reverse","showSnackBar","setShowSnackBar","showErrorSnackBar","setShowErrorSnackBar","handleClose","reason","Alert","ref","elevation","variant","display","backgroundImage","process","firstPageLink","pdfName","marginTop","marginLeft","marginRight","current","Stack","spacing","Snackbar","open","autoHideDuration","onClose","severity","faAngleLeft","faAngleRight","drawHighlight","range","node","appendChild","extractContents","insertNode","doHighlight","highlightColor","yOfSelectedStartContainer","startLine","offsetOfSelectedStartContainer","startOffset","indexOfSelectedStartContainer","startNode","yOfSelectedEndContainer","endLine","offsetOfSelectedEndContainer","endOffset","indexOfSelectedEndContainer","endNode","decimalYOfSelectedStartContainer","parseInt","slice","decimalYOfSelectedEndContainer","currentElement","newRange","createRange","newNode","createElement","add","setStart","childNodes","setEnd","clickHighlight","highlightButtonsWrap","selectedText","window","getSelection","trim","selectedRange","getRangeAt","selectedStartContainer","startContainer","selectedEndContainer","endContainer","parentElementOfSelectedStartContainer","parentElement","parentElementOfSelectedEndContainer","recur","x","count","includes","highlightColorIndex","pageNum","turnOver","direction","setCurrentPageNumber","useLocation","recentlyReadPage","setHtml","setMarkdownValue","highlightButton","highlightButtonPurple","highlightButtonYellow","setCurrentBookInfo","newCurrentBookInfo","find","getPageLink","pageLink","selectableTextAreaMouseUp","highlightButtonCurrent","pageX","y","pageY","highlightButtonCurrentWidth","Number","getComputedStyle","highlightButtonCurrentHeight","left","top","selectableTextArea","querySelectorAll","documentMouseDown","empty","forEach","addEventListener","removeEventListener","JSON","parse","editorLog","onTouchStart","flex","faCaretLeft","faCaretRight","onKeyUp","keyCode","textDecoration","faFilePdf","renderedImg","Array","generateCanvas","deferred","currentList","pdfWidth","$","outerWidth","heightCalculate","outerHeight","html2canvas","canvas","img","toDataURL","push","num","image","resolve","lists","deferreds","jsPDF","promise","sorted","sort","a","b","currentHeight","sortedHeight","sortedImage","addPage","addImage","save","createPdf","toPdf"],"sourceRoot":""}